<div class="p-1 rounded-xl border tableBorder">
  <table mat-table [dataSource]="data" [class]="tableClass">

    <ng-container *ngFor="let col of columns" [matColumnDef]="col.key">
      <th mat-header-cell *matHeaderCellDef
          [style.width]="col.width"
          [ngClass]="col.headerClass">
        {{ col.header }}
      </th>

      <td mat-cell *matCellDef="let row" [ngClass]="col.cellClass">
          @if (!col.cellTemplate) {
              {{ $any(row)[col.key] }}
          } @else {
              <ng-container *ngTemplateOutlet="col.cellTemplate; context: { $implicit: row, value: $any(row)[col.key] }"></ng-container>
    }
  </td>

    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayed"></tr>
    <tr mat-row *matRowDef="let row; columns: displayed"></tr>
  </table>
</div>