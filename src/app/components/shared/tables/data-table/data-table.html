<div class="rounded-xl border-4 tableBorder">
  <table mat-table [dataSource]="renderedData" [class]="tableClass" matSort (matSortChange)="onSort($event)">

    @for (col of columns; track col.key) {
      <ng-container [matColumnDef]="col.key">
        <th mat-header-cell *matHeaderCellDef mat-sort-header
          [disabled]="col.sortable !== true"
          [style.width]="col.width"
          [ngClass]="col.headerClass">
          {{ col.header }}
        </th>

        <td mat-cell *matCellDef="let row" [ngClass]="col.cellClass">
          @if (!col.cellTemplate) {
            {{ $any(row)[col.key] }}
          }
          @else {
            <ng-container *ngTemplateOutlet="col.cellTemplate; context: { $implicit: row, value: $any(row)[col.key] }"></ng-container>
          }
        </td>
      </ng-container>
    }
    <tr mat-header-row *matHeaderRowDef="displayed"></tr>
    <tr mat-row *matRowDef="let row; columns: displayed"></tr>
  </table>
</div>